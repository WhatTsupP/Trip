<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trip Expense Tracker - Buddy Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="p-4 md:p-12 min-h-screen">

    <div id="createTripModal" class="modal-bg">
        <div class="bg-white p-8 rounded-[32px] shadow-2xl max-w-sm w-full mx-4 border border-white">
            <div class="w-16 h-16 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center mb-6 mx-auto"><i class="fas fa-suitcase-rolling text-2xl"></i></div>
            <h3 class="text-2xl font-bold text-slate-800 text-center mb-2">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà</h3>
            <p class="text-slate-500 text-sm text-center mb-8 font-light">‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏£‡∏¥‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏•‡∏á‡∏ï‡∏±‡∏ß</p>
            <div class="space-y-6">
                <input type="text" id="tripNameInput" oninput="this.classList.remove('input-error')" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ó‡∏£‡∏¥‡∏õ‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô 2025" class="w-full px-5 py-4 rounded-2xl outline-none text-base">
                <div class="flex gap-3">
                    <button onclick="closeCreateTrip()" class="btn-custom flex-1 bg-slate-100 text-slate-500 py-4 rounded-2xl font-semibold text-sm hover:bg-slate-200">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button onclick="confirmAddTrip()" class="btn-custom flex-1 bg-blue-600 text-white py-4 rounded-2xl font-bold text-sm shadow-lg shadow-blue-200 hover:bg-blue-700">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ</button>
                </div>
            </div>
        </div>
    </div>

    <div id="customModal" class="modal-bg">
        <div class="bg-white p-8 rounded-[32px] shadow-2xl max-w-sm w-full mx-4 text-center border border-white">
            <div id="modalIcon" class="text-5xl mb-4"></div>
            <h3 id="modalTitle" class="text-xl font-bold mb-2 text-slate-800"></h3>
            <p id="modalMessage" class="text-slate-500 mb-8 text-sm font-light leading-relaxed whitespace-pre-line"></p>
            <div id="modalActions" class="flex gap-3">
                <button id="modalConfirmBtn" class="btn-custom flex-1 bg-blue-600 text-white py-3.5 rounded-2xl font-bold text-sm">‡∏ï‡∏Å‡∏•‡∏á</button>
                <button id="modalCancelBtn" class="btn-custom flex-1 bg-slate-100 text-slate-500 py-3.5 rounded-2xl font-semibold text-sm">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            </div>
        </div>
    </div>

    <div id="settlementModal" class="modal-bg">
        <div class="bg-white p-8 rounded-[32px] shadow-2xl max-w-md w-full mx-4 border border-white">
            <div class="flex justify-between items-center mb-6">
                <h3 class="font-bold text-xl text-slate-800 flex items-center gap-3"><i class="fas fa-user-check text-emerald-500"></i> ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô</h3>
                <button onclick="closeSettlement()" class="w-8 h-8 flex items-center justify-center bg-slate-50 rounded-full text-slate-400 hover:text-slate-600"><i class="fas fa-times text-xs"></i></button>
            </div>
            <div class="mb-4">
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 ml-1">‡∏ú‡∏π‡πâ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô</p>
                <div id="payerFixedSection"></div>
            </div>
            <hr class="border-slate-100 mb-4">
            <div>
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 ml-1">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡∏π‡πâ‡∏£‡πà‡∏ß‡∏°‡∏´‡∏≤‡∏£</p>
                <div id="settlementList" class="space-y-1 max-h-64 overflow-y-auto pr-2"></div>
            </div>
            <div class="mt-8 text-center">
                <p class="text-[10px] text-slate-400 mb-4">* ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î "‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß" ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ</p>
                <button onclick="closeSettlement()" class="btn-custom btn-blue w-full py-4 rounded-2xl font-bold shadow-lg shadow-blue-100">‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á</button>
            </div>
        </div>
    </div>

    <div class="max-w-6xl mx-auto">
        <div id="homeView">
            <header class="mb-16 text-center">
                <div class="inline-flex items-center justify-center w-20 h-20 bg-blue-600 text-white rounded-[28px] mb-6 shadow-2xl shadow-blue-200"><i class="fas fa-paper-plane text-3xl"></i></div>
                <h1 class="text-4xl font-extrabold text-slate-800 mb-3 tracking-tight">Trip Expense <span class="text-blue-600 italic">Buddy</span></h1>
                <p class="text-slate-400 font-light mb-10 text-lg">‡πÅ‡∏¢‡∏Å‡∏ö‡∏¥‡∏• ‡∏´‡∏≤‡∏£‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ ‡∏™‡∏ö‡∏≤‡∏¢‡πÉ‡∏à‡∏ó‡∏±‡πâ‡∏á‡∏Å‡πä‡∏ß‡∏ô</p>
                <button onclick="openCreateTrip()" class="btn-custom group bg-blue-600 text-white px-12 py-5 rounded-[24px] font-bold shadow-2xl shadow-blue-300 flex items-center gap-3 mx-auto transform hover:scale-105 active:scale-95">
                    <i class="fas fa-plus text-sm group-hover:rotate-90 transition-transform duration-300"></i> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏°‡πà
                </button>
            </header>
            <div id="tripListGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </div>

        <div id="tripDetailView" class="hidden">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-10">
                <button onclick="backToHome()" class="text-blue-600 font-semibold"><i class="fas fa-chevron-left mr-2"></i> ‡∏ó‡∏£‡∏¥‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                <button onclick="confirmDeleteTrip(currentTrip)" class="btn-custom btn-delete-main px-6 py-3 rounded-2xl font-bold text-xs shadow-sm"><i class="fas fa-trash-alt mr-2"></i>‡∏•‡∏ö‡∏ó‡∏£‡∏¥‡∏õ‡∏ô‡∏µ‡πâ</button>
            </div>

            <h1 id="currentTripTitle" class="text-4xl font-extrabold text-slate-800 mb-8"></h1>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mb-12">
                <div class="card p-6 border-none dash-blue shadow-sm"><p class="text-[11px] font-bold uppercase tracking-wider mb-2">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏£‡∏¥‡∏õ</p><h2 class="text-3xl font-extrabold" id="totalTripAmount">0 ‡∏ö‡∏≤‡∏ó</h2></div>
                <div class="card p-6 border-none dash-purple shadow-sm"><p class="text-[11px] font-bold uppercase tracking-wider mb-3">‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</p><div id="categorySummary" class="text-xs font-semibold leading-relaxed"></div></div>
                <div class="card p-6 border-none dash-emerald shadow-sm"><p class="text-[11px] font-bold uppercase tracking-wider mb-2">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞</p><div id="paymentStatus" class="text-xs font-semibold leading-relaxed"></div></div>
                <div class="card p-6 border-none dash-orange shadow-sm"><p class="text-[11px] font-bold uppercase tracking-wider mb-3">‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Ñ‡∏ô (‡∏Ñ‡πâ‡∏≤‡∏á / ‡∏à‡πà‡∏≤‡∏¢)</p><div id="memberDashboardSummary" class="text-[11px] font-semibold leading-relaxed overflow-y-auto max-h-24"></div></div>
            </div>

            <div class="card p-8 mb-10 border-none shadow-sm">
                <h3 class="text-xs font-bold text-slate-400 mb-6 uppercase tracking-[0.2em]">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏ô‡∏ó‡∏£‡∏¥‡∏õ</h3>
                <div class="flex flex-col md:flex-row gap-3 mb-8">
                    <input type="text" id="memberInput" oninput="this.classList.remove('input-error')" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô..." class="flex-1 px-5 py-3.5 rounded-2xl outline-none text-sm border-slate-200">
                    <button onclick="addMember()" class="btn-custom btn-blue px-8 py-3.5 rounded-2xl font-bold text-sm shadow-lg shadow-blue-100">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠</button>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse min-w-[800px]">
                        <thead class="bg-slate-50 text-slate-400"><tr><th class="p-4 rounded-l-2xl">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</th><th class="p-4 text-right">‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢</th><th class="p-4 text-right text-rose-500">‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</th><th class="p-4 text-right text-emerald-600">‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß</th><th class="p-4 text-center rounded-r-2xl">‡∏•‡∏ö</th></tr></thead>
                        <tbody id="memberTableBody"></tbody>
                    </table>
                </div>
            </div>

            <div class="card p-8 mb-10 border-2 border-dashed border-blue-200 bg-blue-50/10">
                <h3 class="font-bold mb-6 text-slate-700 uppercase text-xs tracking-widest">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="space-y-1.5"><label class="text-[10px] font-bold text-slate-400 uppercase ml-1">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label><select id="itemCategory" onchange="this.classList.remove('input-error'); checkCategory(this.value)" class="w-full px-5 py-3.5 rounded-2xl outline-none font-medium"><option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà --</option><option value="‡∏Å‡∏¥‡∏ô">üç¥ ‡∏Ç‡∏≠‡∏á‡∏Å‡∏¥‡∏ô</option><option value="‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á">üöó ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</option><option value="‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å">üè® ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å</option><option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‚ú® ‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option></select></div>
                    <div id="remarkContainer" class="space-y-1.5"><label class="text-[10px] font-bold text-blue-600 uppercase ml-1">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label><input type="text" id="itemRemark" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó" class="w-full px-5 py-3.5 rounded-2xl outline-none border-blue-200"></div>
                    <div class="space-y-1.5"><label class="text-[10px] font-bold text-slate-400 uppercase ml-1">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</label><input type="text" id="itemName" oninput="this.classList.remove('input-error')" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á" class="w-full px-5 py-3.5 rounded-2xl outline-none font-medium"></div>
                    <div class="space-y-1.5"><label class="text-[10px] font-bold text-slate-400 uppercase ml-1">‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ï‡πá‡∏° (‡∏ö‡∏≤‡∏ó)</label><input type="number" id="itemAmount" oninput="this.classList.remove('input-error')" placeholder="0.00" min="0" class="w-full px-5 py-3.5 rounded-2xl outline-none font-bold text-blue-600"></div>
                    <div class="space-y-1.5"><label class="text-[10px] font-bold text-slate-400 uppercase ml-1">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡∏´‡∏≤‡∏£</label><input type="number" id="itemSplit" oninput="this.classList.remove('input-error'); checkSplitLogic(this)" placeholder="‡πÄ‡∏ä‡πà‡∏ô 1" min="1" class="w-full px-5 py-3.5 rounded-2xl outline-none font-bold text-indigo-600"></div>
                    <div class="space-y-1.5"><label class="text-[10px] font-bold text-slate-400 uppercase ml-1">‡πÉ‡∏Ñ‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢?</label><select id="itemNote" onchange="this.classList.remove('input-error')" class="w-full px-5 py-3.5 rounded-2xl outline-none font-bold text-slate-700"></select></div>
                    <div class="space-y-1.5"><label class="text-[10px] font-bold text-slate-400 uppercase ml-1">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</label><select id="itemStatus" class="w-full px-5 py-3.5 rounded-2xl outline-none"><option value="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢">‚è≥ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢</option><option value="‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß">‚úÖ ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß</option></select></div>
                </div>
                <button onclick="addItem()" class="btn-custom btn-blue w-full mt-10 p-5 rounded-3xl font-extrabold uppercase tracking-widest text-base shadow-xl shadow-blue-200"><i class="fas fa-plus-circle text-xl mr-2"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
            </div>

            <div class="card overflow-x-auto mb-24 border-none shadow-sm">
                <table class="w-full text-left border-collapse min-w-[900px]">
                    <thead class="bg-slate-50 text-slate-400"><tr><th class="p-5">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</th><th class="p-5">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th><th class="p-5 text-right">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</th><th class="p-5 text-center">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏ß‡∏°</th><th class="p-5 text-center">‡πÄ‡∏ä‡πá‡∏Ñ</th><th class="p-5 text-center">‡∏•‡∏ö</th></tr></thead>
                    <tbody id="itemsListBody" class="text-slate-600"></tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>